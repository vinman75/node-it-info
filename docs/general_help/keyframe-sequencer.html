<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyframe Sequencer Panel - Node-It Help</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="icon" type="image/png" href="../assets/node-it_icon.png">
</head>
<body>
    <header>
        <img src="../assets/node-it_icon.png" alt="Node-It Icon" class="header-icon">
        <h1>Node-It Help Documentation v0.6.0</h1>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search documentation..." autocomplete="off">
            <div id="searchResultsContainer"></div>
        </div>
    </header>
    <div class="content-wrapper">
        <nav>
            <!-- Navigation will be loaded here by script.js -->
            <p class="loading-placeholder">Loading navigation...</p>
        </nav>
        <main>
            <h2>Keyframe Sequencer Panel</h2>
<p>The <strong>Keyframe Sequencer Panel</strong> (typically dockable at the bottom or side) is the primary interface for managing and editing keyframes for animatable properties of nodes in your graph.</p>
        
        <h4>Core Functionality:</h4>
        <ul>
            <li><strong>Property Listing:</strong>
                <ul>
                    <li>Displays a list of all "keyable" attributes from nodes currently in the graph.</li>
                    <li>Properties are grouped by node name and then attribute name (e.g., "MyTransformNode : translate_x").</li>
                    <li>Shows the data type of the attribute and the number of existing keyframes (e.g., "[3K]").</li>
                    <li>Selecting a property in this list populates the Keyframe Table with its specific keyframes.</li>
                </ul>
            </li>
            <li><strong>Keyframe Table:</strong>
                <ul>
                    <li>When a property is selected, this table shows its keyframes with columns for:
                        <ul>
                            <li><strong>Time:</strong> The frame number (or time unit) where the keyframe is set. Editable.</li>
                            <li><strong>Value:</strong> The value of the property at that keyframe. Editable, with appropriate editors based on data type (e.g., float spinbox, vector input, color swatch for color types).</li>
                            <li><strong>Interpolation (Out):</strong> The interpolation method used for the curve segment *leaving* this keyframe towards the next (e.g., Linear, Stepped, EaseInOut). Editable via a dropdown.</li>
                        </ul>
                    </li>
                    <li>Rows are highlighted if their 'Time' matches the current frame on the main Visualizer timeline.</li>
                </ul>
            </li>
        </ul>

        <h4>Keyframe Management:</h4>
        <ul>
            <li><strong>Set Key (<img src="../assets/keyframe_set_icon.png" alt="Set Key icon" style="height:1em; vertical_align:middle;"> button):</strong>
                <ul>
                    <li>For the currently selected property in the list, this button adds a new keyframe (or updates an existing one) at the current frame indicated by the Visualizer's time slider.</li>
                    <li>The value used for the new keyframe is the property's current value on the target node.</li>
                </ul>
            </li>
            <li><strong>Delete Key (<img src="../assets/keyframe_delete_icon.png" alt="Delete Key icon" style="height:1em; vertical_align:middle;"> button):</strong>
                <ul>
                    <li>Deletes the keyframe currently selected in the Keyframe Table.</li>
                </ul>
            </li>
            <li><strong>Auto Key (<img src="../assets/autokey_toggle_icon.png" alt="Auto Key icon" style="height:1em; vertical_align:middle;"> button):</strong>
                <ul>
                    <li>Toggles automatic keyframe creation. When "On", if you change a keyable property's value (e.g., in the Node Editor or via a canvas handle) *and* the current time on the timeline does not already have a key for that property, a new keyframe will be automatically set.</li>
                </ul>
            </li>
            <li><strong>Context Menu (on Property List):</strong>
                <ul>
                    <li><strong>Animate Property:</strong> If a keyable property is not yet animated, this option enables animation tracking for it and typically creates an initial keyframe at the current time with the property's current value.</li>
                    <li><strong>Clear All Keys:</strong> Removes all keyframes for the selected animated property.</li>
                    <li><strong>Remove from Sequencer:</strong> Stops animation tracking for the selected property and removes it from the Keyframe Sequencer list (this also clears its keyframes).</li>
                </ul>
            </li>
        </ul>

        <h4>Property Animation Behavior:</h4>
        <ul>
            <li><strong>Pre-Infinity & Post-Infinity Dropdowns:</strong>
                <ul>
                    <li>Located at the top of the property list section.</li>
                    <li>Control how an animated property behaves *before* its first keyframe ("Pre") and *after* its last keyframe ("Post").</li>
                    <li>Options typically include:
                        <ul>
                            <li><strong>Constant:</strong> Holds the value of the first/last keyframe.</li>
                            <li><strong>Loop:</strong> Repeats the entire keyframed animation segment.</li>
                            <li><strong>Oscillate (Ping Pong):</strong> Repeats the animation segment, alternating between forward and backward playback.</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>

        <h4>Interaction with Other Panels:</h4>
        <ul>
            <li><strong>Visualizer Dock Timeline:</strong> The "Current Frame" from the Visualizer's time slider determines where new keys are set and which keys are highlighted in the table.</li>
            <li><strong>Node Editor / Canvas Handles:</strong> If "Auto Key" is enabled, changes made to keyable properties via these interfaces can automatically create keyframes.</li>
        </ul>

        <p><em>(This panel is an instance of <code>KeyframeSequencerPanel</code> and works closely with the <code>KeyframeManager</code> to manage all animation data. All operations are undoable.)</em></p>
        <!-- Consider adding a screenshot: <img src="../assets/help/keyframe_sequencer_panel.png" alt="Keyframe Sequencer Panel showing properties and keyframes"> -->
        
        </main>
    </div>
    <footer>
        Node-It v0.6.0 Documentation | Project License: MIT | Copyright 2025, Vinman75
    </footer>

    <!-- IMPORTANT: Load nav_data.js BEFORE script.js -->
    <script src="../nav_data.js"></script>
    <script src="../script.js"></script>
</body>
</html>